# Configuration File Customization

One of the key added values of ROS2 OpenVINO is automatically create new pipeline on demand according to the given configuration files. In order to create new pipelines, the end user only need to create a new configuration file or update one already existed.  The configuration file must be written by following some rules.

         1 Pipelines:
         2 - name: object
         3   inputs: [RealSenseCamera]
         4   infers:
         5     - name: ObjectDetection
         6       model: /opt/intel/openvino/deployment_tools/tools/model_downloader/object_detection/common/mobilenet-ssd/caffe/output/FP16/mobilenet-ssd.xml
         7       engine: MYRIAD
         8       label: to/be/set/xxx.labels
         9       batch: 1
         10       confidence_threshold: 0.5
         11       enable_roi_constraint: true # set enable_roi_constraint to false if you don't want to make the inferred ROI (region of interest) constrained into the camera frame
         12   outputs: [ImageWindow, RosTopic, RViz]
         13   connects:
         14     - left: RealSenseCamera
         15       right: [ObjectDetection]
         16     - left: ObjectDetection
         17       right: [ImageWindow]
         18     - left: ObjectDetection
         19       right: [RosTopic]
         20     - left: ObjectDetection
         21       right: [RViz]

In this sample, a pipeline is to be created with this topology:

```flow
input=operation: RealSenseCamera
infer=operation: ObjectDetection
output1=operation: ImageWindow
output2=operation: RosTopic
output3=operation: RViz

input-infer-output1
infer-output2
infer-output3
```

Detail Description for each line shows in below tabel:

|Line No.|Description|
|-------------|---|
| 1 |Keyword, label for pipeline parameters. The pipeline configuration must be started by this line.|
|2|Pipeline name, the published topics bound to this name. (e.g. /openvino_toolkit/**object**/face_detection)|
|3|The name of chosen input device, should be one and only one of [the list](https://github.com/intel/ros2_openvino_toolkit/blob/devel/doc/tables_of_contents/supported_features/Supported_features.md#input-resources) (taking the item "Input Resource Name").|
|4|key word for inference section. one or more inferences can be included in a pipeline's inference section.|
|5|The name of Inference instance, should be in [the list](https://github.com/intel/ros2_openvino_toolkit/blob/devel/doc/tables_of_contents/supported_features/Supported_features.md#inference-implementations).<br>**NOTE**: if a pipeline contains 2 or more inference instances, the first one should be a detection inference.
|6|Model description file with absolute path, generated by model_optimizer tool|
|7|The name of Inference engine, should be one of:CPU, GPU and MYRIAD.|
|8|The file name with absolute path of object labels.<br>**NOTE**: not enabled in the current version. The labels file with the same name as model description file under the same folder is searched and used.|
|9|The number of input data to be enqueued and handled by inference engine in parallel.|
|10|Set the inference result filtering by confidence ratio.|
|11|set *enable_roi_constraint* to false if you don't want to make the inferred ROI (region of interest) constrained into the camera frame.|
|12|A list of output method enabled for inference result showing/notifying. Should be one or some of: <br>    • ImageWindow <br>    • RosTopic<br>    • Rviz<br>    • RosService(*)<br>**NOTE**: RosService can only be used in ROS2 service server pipeline.|
|13|keyword for pipeline entities' relationship topology.|
|14~21|The detailed connection topology for the pipeline. <br>A pair of "left" and "right" parameters, whose contents are the names of inputs(line3), infers(line5) and outputs(line12) defines a connection between the two entities, it also defines that the data would be moved from *entity left* to *entity right*.| 
